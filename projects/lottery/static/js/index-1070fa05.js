import{r as V,a as r,d as B,w as $,c as x,P as se,o as b,b as le,e as D,f as i,u as T,t as C,g as h,h as O,F as pe,S as fe,_ as P,i as me,j as _e,k as ge,l as he,m as ye,n as we,p as be,q as xe,s as Se,v as Te,x as Be,y as Ae,z as Ie,A as ze,B as Fe,C as ke,D as S,E as G,G as L,H as ae,I as oe,J as $e,K as ne,L as De,M as Ee,N as Ne,O as Ce,Q as Pe,R as Le}from"./entry-62004b40.js";import{B as ue}from"./index-0d00582b.js";function Re(t=!1){return V({url:"/prize/getPrizeNo",method:"GET",loading:t})}function We(t=!1){return V({url:"/prize/getRankList",method:"GET",loading:t})}function He(){return V({url:"/prize/getUserPrizeList",method:"GET"})}function qe(t){const s={...{total:8,baseCircle:8,minSpeed:40,maxSpeed:200},...t},l=r(-1),e=r(-1),p=r(!1),d=s.total*s.baseCircle;let n=0,f=0,o=s.maxSpeed;const _=()=>{n++,l.value++,l.value>=s.total&&(l.value=0)},m=()=>{n=0,o=s.maxSpeed,p.value=!1,clearTimeout(f)},a=async()=>{if(_(),n>d+s.total&&l.value===e.value){m(),s.callback&&s.callback();return}if(n<=d){if(o-=10,o<=s.minSpeed&&(o=s.minSpeed),n===d){const y=await Re();e.value=y.prizeNo}}else o+=10,o>=s.maxSpeed&&(o=s.maxSpeed);f=setTimeout(a,o)};return{currentIndex:l,prizeIndex:e,isDoing:p,lotteryHandler:()=>{p.value||(e.value=-1,p.value=!0,a())}}}const Me={class:"content-box"},Ue=["src"],Ve={class:"content"},Oe={class:"context"},Ge=B({name:"ResultPopup"}),je=B({...Ge,props:{show:{type:Boolean,default:!1},type:{type:String,default:"fail"},tip:{type:String,default:""}},emits:["update:show"],setup(t,{emit:v}){const s=t,l=r(!1);$(()=>s.show,d=>{l.value=d});const e=x(()=>s.type==="fail"?pe:fe),p=()=>{v("update:show",!1)};return(d,n)=>{const f=ue,o=se;return b(),le(o,{class:"result-popup",show:l.value,"onUpdate:show":n[0]||(n[0]=_=>l.value=_),teleport:"body"},{default:D(()=>[i("div",Me,[i("img",{class:"content-title",src:T(e)},null,8,Ue),i("div",Ve,[i("div",Oe,C(t.tip),1),h(f,{type:"primary",class:"btnsave",block:"",onClick:p},{default:D(()=>[O(" \u786E\u5B9A ")]),_:1})])])]),_:1},8,["show"])}}});const Qe=P(je,[["__scopeId","data-v-720f9e7f"]]),j=[{img:me,activeImg:_e,title:"\u7F51\u6613\u4E91\u97F3\u4E50\u4F1A\u5458\u6708\u5361"},{img:ge,activeImg:he,title:"5\u5143\u8BDD\u8D39\u5238"},{img:ye,activeImg:we,title:"\u817E\u8BAF\u89C6\u9891\u4F1A\u5458\u6708\u5361"},{img:be,activeImg:xe,title:"QQ\u97F3\u4E50\u4F1A\u5458\u6708\u5361"},{img:Se,activeImg:Te,title:"15\u5143\u8BDD\u8D39\u5238"},{img:Be,activeImg:Ae,title:"\u7231\u5947\u827A\u89C6\u9891\u4F1A\u5458\u6708\u5361"},{img:Ie,activeImg:ze,title:"\u7EE7\u7EED\u52AA\u529B",fail:!0},{img:Fe,activeImg:ke,title:"10\u5143\u8BDD\u8D39\u5238"}],Ye=t=>(ae("data-v-1012ba91"),t=t(),oe(),t),Je={class:"content-box"},Ke={class:"content"},Xe=Ye(()=>i("div",{class:"title"},"\u4E2D\u5956\u8BB0\u5F55",-1)),Ze={class:"list"},et=B({name:"PrizePopup"}),tt=B({...et,props:{show:{type:Boolean,default:!1}},emits:["update:show"],setup(t,{emit:v}){const s=t,l=r(!1);$(()=>s.show,n=>{n&&p(),l.value=n});const e=r([]),p=()=>{He().then(n=>{e.value=n})},d=()=>{v("update:show",!1)};return(n,f)=>{const o=ue,_=se;return b(),le(_,{class:"prize-popup",show:l.value,"onUpdate:show":f[0]||(f[0]=m=>l.value=m),teleport:"body"},{default:D(()=>[i("div",Je,[i("div",Ke,[Xe,i("div",Ze,[(b(!0),S(L,null,G(e.value,(m,a)=>(b(),S("div",{class:"item",key:a},[i("p",null,C(m.lotteryTime),1),i("p",null,C(T(j)[m.prizeNo].title),1)]))),128))]),h(o,{type:"primary",class:"btnsave",block:"",onClick:d},{default:D(()=>[O(" \u786E\u5B9A ")]),_:1})])])]),_:1},8,["show"])}}});const st=P(tt,[["__scopeId","data-v-1012ba91"]]);function lt(t,v,s,l){var e,p=!1,d=0;function n(){e&&clearTimeout(e)}function f(){n(),p=!0}typeof v!="boolean"&&(l=s,s=v,v=void 0);function o(){for(var _=arguments.length,m=new Array(_),a=0;a<_;a++)m[a]=arguments[a];var c=this,y=Date.now()-d;if(p)return;function g(){d=Date.now(),s.apply(c,m)}function A(){e=void 0}l&&!e&&g(),n(),l===void 0&&y>t?g():v!==!0&&(e=setTimeout(l?A:g,l===void 0?t-y:t))}return o.cancel=f,o}function at(t){const v=Ee();v&&Object.assign(v.proxy,t)}const ot={modelValue:{type:Boolean,default:!0},list:{type:Array,required:!0,default:[]},step:{type:Number,default:1},limitScrollNum:{type:Number,default:3},hover:{type:Boolean,default:!1},direction:{type:String,default:"up"},singleHeight:{type:Number,default:0},singleWidth:{type:Number,default:0},singleWaitTime:{type:Number,default:1e3},isRemUnit:{type:Boolean,default:!1},isWatch:{type:Boolean,default:!0},delay:{type:Number,default:0},ease:{type:[String,Object],default:"ease-in"},count:{type:Number,default:-1},copyNum:{type:Number,default:1},wheel:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1}};globalThis.window.cancelAnimationFrame=function(){return globalThis.window.cancelAnimationFrame||globalThis.window.webkitCancelAnimationFrame||globalThis.window.mozCancelAnimationFrame||globalThis.window.oCancelAnimationFrame||globalThis.window.msCancelAnimationFrame||function(t){return globalThis.window.clearTimeout(t)}}();globalThis.window.requestAnimationFrame=function(){return globalThis.window.requestAnimationFrame||globalThis.window.webkitRequestAnimationFrame||globalThis.window.mozRequestAnimationFrame||globalThis.window.oRequestAnimationFrame||globalThis.window.msRequestAnimationFrame||function(t){return globalThis.window.setTimeout(t,1e3/60)}}();function nt(t){t&&typeof t!="boolean"&&t.length>100&&console.warn(`\u6570\u636E\u8FBE\u5230\u4E86${t.length}\u6761\u6709\u70B9\u591A\u54E6~,\u53EF\u80FD\u4F1A\u9020\u6210\u90E8\u5206\u8001\u65E7\u6D4F\u89C8\u5668\u5361\u987F\u3002`)}const ut=B({name:"vue3-seamless-scroll",inheritAttrs:!1,props:ot,emits:["stop","count","move"],setup(t,{slots:v,emit:s,attrs:l}){const e=t,p=r(null),d=r(null),n=r(null),f=r(null),o=r(null),_=r(0),m=r(0),a=r(0),c=r(0),y=r(!1),g=r(0),A=x(()=>e.list?e.list.length>=e.limitScrollNum:!1),Q=x(()=>({width:_.value?`${_.value}px`:"auto",transform:`translate(${a.value}px,${c.value}px)`,transition:`all ${typeof e.ease=="string"?e.ease:"cubic-bezier("+e.ease.x1+","+e.ease.y1+","+e.ease.x2+","+e.ease.y2+")"} ${e.delay}ms`,overflow:"hidden",display:e.singleLine?"flex":"block"})),R=x(()=>e.direction=="left"||e.direction=="right"),W=x(()=>R.value?{float:"left",overflow:"hidden",display:e.singleLine?"flex":"block",flexShrink:e.singleLine?0:1}:{overflow:"hidden"}),Y=x(()=>e.isRemUnit?parseInt(globalThis.window.getComputedStyle(globalThis.document.documentElement,null).fontSize):1),H=x(()=>e.singleWidth*Y.value),F=x(()=>e.singleHeight*Y.value),ie=x(()=>{let u,w=e.step;return R.value?u=H.value:u=F.value,u>0&&u%w>0&&console.error("\u5982\u679C\u8BBE\u7F6E\u4E86\u5355\u6B65\u6EDA\u52A8\uFF0Cstep \u9700\u662F\u5355\u6B65\u5927\u5C0F\u7684\u7EA6\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u4FDD\u8BC1\u5355\u6B65\u6EDA\u52A8\u7ED3\u675F\u7684\u4F4D\u7F6E\u662F\u5426\u51C6\u786E\u3002~~~~~"),w}),z=()=>{cancelAnimationFrame(f.value),f.value=null},q=(u,w,ve)=>{f.value=requestAnimationFrame(function(){const Z=m.value/2,ee=_.value/2;if(u==="up"?(Math.abs(c.value)>=Z&&(c.value=0,g.value+=1,s("count",g.value)),c.value-=w):u==="down"?(c.value>=0&&(c.value=Z*-1,g.value+=1,s("count",g.value)),c.value+=w):u==="left"?(Math.abs(a.value)>=ee&&(a.value=0,g.value+=1,s("count",g.value)),a.value-=w):u==="right"&&(a.value>=0&&(a.value=ee*-1,g.value+=1,s("count",g.value)),a.value+=w),ve)return;let{singleWaitTime:te}=e;o.value&&clearTimeout(o.value),F.value?Math.abs(c.value)%F.value<w?o.value=setTimeout(()=>{I()},te):I():H.value&&Math.abs(a.value)%H.value<w?o.value=setTimeout(()=>{I()},te):I()})},I=()=>{if(z(),y.value||!A.value||g.value===e.count){s("stop",g.value),g.value=0;return}q(e.direction,ie.value,!1)},J=()=>{if(nt(e.list),R.value){let u=d.value.offsetWidth;u=u*2+1,_.value=u}A.value?(m.value=n.value.offsetHeight,e.modelValue&&I()):(z(),c.value=a.value=0)},E=()=>{y.value=!1,I()},M=()=>{y.value=!0,o.value&&clearTimeout(o.value),z()},k=x(()=>e.hover&&e.modelValue&&A.value),re=lt(30,u=>{z();const w=F.value?F.value:15;u.deltaY<0&&q("down",w,!0),u.deltaY>0&&q("up",w,!0)}),ce=u=>{re(u)},K=()=>{z(),y.value=!1,J()};at({Reset:()=>{K()}}),$(()=>e.list,()=>{e.isWatch&&De(()=>{K()})},{deep:!0}),$(()=>e.modelValue,u=>{u?E():M()}),$(()=>e.count,u=>{u!==0&&E()}),$e(()=>{z(),clearTimeout(o.value)}),ne(()=>{A.value&&J()});const{default:N,html:U}=v,de=new Array(e.copyNum).fill(null),X=()=>h(L,null,[h("div",{ref:d,style:W.value},[N&&N()]),A.value?de.map(()=>U&&typeof U=="function"?h("div",{style:W.value},[U()]):h("div",{style:W.value},[N&&N()])):null]);return()=>h("div",{ref:p,class:l.class},[e.wheel&&e.hover?h("div",{ref:n,style:Q.value,onMouseenter:()=>{k.value&&M()},onMouseleave:()=>{k.value&&E()},onWheel:u=>{k.value&&ce(u)}},[X()]):h("div",{ref:n,style:Q.value,onMouseenter:()=>{k.value&&M()},onMouseleave:()=>{k.value&&E()}},[X()])])}}),it={class:"rank-box"},rt={class:"rank-box-inner"},ct=["src"],dt={class:"rank-box-content"},vt=B({__name:"LeaderBoard",setup(t,{expose:v}){const s=r([]);let l=0;const e=()=>{We().then(d=>{s.value=d,p(),l=window.setTimeout(e,30*1e3)})},p=()=>{clearInterval(l),l=0};return ne(()=>{e()}),Ne(()=>{p()}),v({loadData:e}),(d,n)=>(b(),S("div",it,[i("div",rt,[i("img",{class:"rank-box-title",src:T(Ce)},null,8,ct),i("div",dt,[h(T(ut),{list:s.value,class:"scroll",step:.5},{default:D(()=>[(b(!0),S(L,null,G(s.value,(f,o)=>(b(),S("div",{class:"item",key:o},[i("span",null,C(`\u606D\u559C ${f.userName} \u62BD\u4E2D\u4E86${T(j)[f.prizeNo].title}`),1)]))),128))]),_:1},8,["list","step"])])])]))}});const pt=P(vt,[["__scopeId","data-v-75fc6878"]]),ft=t=>(ae("data-v-4a0dc363"),t=t(),oe(),t),mt=ft(()=>i("div",{class:"myprize"},[i("span",{class:"myprize-inner"},[O(" \u8C6A\u793C\u5927\u653E\u9001 "),i("img",{class:"gomyimg",src:Le})])],-1)),_t={class:"lottery"},gt={class:"lottery-item"},ht={class:"lottery-start"},yt={class:"box"},wt=["src"],bt=["src"],xt=B({name:"Lottery"}),St=B({...xt,setup(t){const v=r(),s=Pe(j),l=r(!1),e=r(!1),p=r(""),d=r("success"),{currentIndex:n,prizeIndex:f,lotteryHandler:o}=qe({callback:()=>{var a;l.value=!0;const m=s[f.value];d.value=m.fail?"fail":"success",p.value=m.title,(a=v.value)==null||a.loadData()}}),_=()=>{e.value=!0};return(m,a)=>(b(),S("main",null,[mt,i("div",{class:"gift",onClick:_},"\u6211\u7684\u5956\u54C1"),i("div",_t,[i("div",gt,[i("div",ht,[i("div",{class:"box",onClick:a[0]||(a[0]=(...c)=>T(o)&&T(o)(...c))})]),i("ul",null,[(b(!0),S(L,null,G(s,(c,y)=>(b(),S("li",{key:y},[i("div",yt,[y===T(n)?(b(),S("img",{key:0,src:c.activeImg},null,8,wt)):(b(),S("img",{key:1,src:c.img},null,8,bt))])]))),128))])])]),h(pt,{ref_key:"rank",ref:v},null,512),h(Qe,{show:l.value,"onUpdate:show":a[1]||(a[1]=c=>l.value=c),tip:p.value,type:d.value},null,8,["show","tip","type"]),h(st,{show:e.value,"onUpdate:show":a[2]||(a[2]=c=>e.value=c)},null,8,["show"])]))}});const It=P(St,[["__scopeId","data-v-4a0dc363"]]);export{It as default};
